(()=>{function y(t){let e=document.createElement("div");e.id="card-tracker-container",e.style.position="fixed",e.style.top="50%",e.style.right="10px",e.style.transform="translateY(65%)",e.style.backgroundColor="#f9f9f9",e.style.border="1px solid #ddd",e.style.borderRadius="10px",e.style.padding="15px",e.style.zIndex="10000",e.style.width="280px",e.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.2)",e.style.fontFamily="Arial, sans-serif",e.style.fontSize="14px";let r=document.createElement("div");r.style.cursor="move",r.style.backgroundColor="#ddd",r.style.padding="10px",r.style.textAlign="center",r.style.borderBottom="1px solid #ccc",r.style.borderRadius="10px",r.textContent="Card Tracker",e.appendChild(r);let o=document.createElement("div");o.innerHTML=`
    <div id="tracker-list" style="max-height: 250px; overflow-y: auto; border: 1px solid #ddd; border-radius: 8px; padding: 10px; background-color: #fff;">
      <p style="text-align: center; color: #999;">No cards tracked yet.</p>
    </div>
    <div style="margin-top: 15px; display: flex; justify-content: space-between;">
      <button id="add-card-btn" style="
        background-color: #4CAF50;
        color: white;
        border: none;
        border-radius: 5px;
        padding: 8px 12px;
        cursor: pointer;
        font-size: 14px;
      ">
        Add Card
      </button>
      <button id="clear-cards-btn" style="
        background-color: #f44336;
        color: white;
        border: none;
        border-radius: 5px;
        padding: 8px 12px;
        cursor: pointer;
        font-size: 14px;
      ">
        Clear All
      </button>
    </div>
  `,e.appendChild(o),document.body.appendChild(e),S(e,r);let n=e.querySelector("#add-card-btn"),a=e.querySelector("#tracker-list");n.addEventListener("click",()=>{let c=prompt("Enter card name:");c&&t.addCard(c)}),e.querySelector("#clear-cards-btn").addEventListener("click",()=>{t.clearCards()})}function f(t){let e=t.getState(),r=document.querySelector("#tracker-list");r&&(r.innerHTML="",e.trackedCards.length>0?e.trackedCards.forEach(o=>{let n=document.createElement("div");n.style.display="flex",n.style.justifyContent="space-between",n.style.alignItems="center",n.style.border="1px solid #ddd",n.style.borderRadius="4px",n.style.padding="5px",n.style.marginBottom="5px",n.style.backgroundColor="#f9f9f9";let a=document.createElement("span");a.textContent=o;let s=E();s.addEventListener("click",()=>{t.removeCard(o)}),n.appendChild(a),n.appendChild(s),r.appendChild(n)}):r.innerHTML='<p style="text-align: center; color: #666;">No cards tracked yet.</p>')}function S(t,e){let r=!1,o=0,n=0;e.addEventListener("mousedown",a=>{r=!0;let s=t.getBoundingClientRect();o=a.clientX-s.left,n=a.clientY-s.top,document.body.style.cursor="grabbing"}),document.addEventListener("mousemove",a=>{if(!r)return;let s=a.clientX-o,c=a.clientY-n;t.style.left=`${s}px`,t.style.top=`${c}px`,t.style.transform=""}),document.addEventListener("mouseup",()=>{r&&(r=!1,document.body.style.cursor="default")})}function E(){let t=document.createElement("button");return t.textContent="\xD7",t.style.backgroundColor="white",t.style.color="#f44336",t.style.border="none",t.style.borderRadius="50%",t.style.width="24px",t.style.height="24px",t.style.cursor="pointer",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.fontWeight="bold",t.style.fontSize="16px",t.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.2)",t.style.transition="transform 0.2s ease, background-color 0.2s ease",t.addEventListener("mouseenter",()=>{t.style.transform="scale(1.2)",t.style.backgroundColor="#fddcdc"}),t.addEventListener("mouseleave",()=>{t.style.transform="scale(1)",t.style.backgroundColor="transparent"}),t}function m(t,e,r){let o=document.querySelector(t);if(!o)return;new MutationObserver(a=>{a.forEach(s=>{s.addedNodes.length>0&&s.addedNodes.forEach(c=>{if(c.nodeType===Node.ELEMENT_NODE){let l=c.textContent.trim().replace(/\n|\r/g,"");e(l,r)}})})}).observe(o,{childList:!0,subtree:!1})}function g(t,e){let r=[{regex:/^(.*) takes (.*) in reputation range from the display/,action:"take"},{regex:/^(.*) snaps (.*) from the display/,action:"take"},{regex:/^(.*) draws (.*) sponsor/,action:"take"},{regex:/^(.*) plays (.*) for/,action:"play"},{regex:/^(.*) plays (.*)$/,action:"play"}];for(let{regex:o,action:n}of r){let a=t.match(o);if(a){let s=a[1].trim(),c=a[2].trim(),l=e.getState().playerNames.opponentName;s==l&&(n==="take"?e.addCard(c):n==="play"&&e.removeCard(c));return}}}function h(){let t=document.querySelectorAll(".player-name"),e=t?t[0]:null,r=t?t[1]:null,o=e?e.textContent.trim():null,n=r?r.textContent.trim():null;return{yourName:o,opponentName:n}}function L(){let t=[];document.querySelectorAll("#base-projects-holder .project-holder").forEach(s=>{let c=s.querySelector(".badge-icon");if(c){let l=c.getAttribute("data-type");l&&t.push({type:"BASE",projectType:l})}});function r(s){let c=s.querySelector(".badge-icon"),l=s.querySelector(".icon-partner-zoo"),u=s.querySelector(".icon-release-animal");if(c){let d=c.getAttribute("data-type");d&&(l&&t.push({type:"PROG",projectType:d}),u&&t.push({type:"RELEASE",projectType:d}))}}return document.querySelectorAll("#projects-holder .project-holder").forEach(r),document.querySelectorAll("#cards-pool .project-card").forEach(r),document.querySelectorAll(".player-board-hand .project-card").forEach(r),t}function A(t){let e=t.querySelector(".ark-card-top-right");if(!e)return[];let r=e.querySelectorAll(".badge-icon"),o=new Set(Array.from(r).map(n=>n.getAttribute("data-type")));return Array.from(o)}function N(t,e){let r=A(t),o=[];for(let n of e)r.includes(n.projectType)&&o.push(n);return o}function T(t){[".card-pool-folder .ark-card",".player-board-hand .ark-card"].forEach(r=>{document.querySelectorAll(r).forEach(n=>{if(n.getAttribute("data-unmarked")==="true")return;let a=N(n,t);j(n,a)})})}function j(t,e){let r=t.querySelector(".tag-container");if(r&&r.remove(),!e.length){C(t);return}w(t),B(t),r=document.createElement("div"),r.className="tag-container",r.style.position="absolute",r.style.top="50%",r.style.left="50%",r.style.transform="translate(-50%, -50%)",r.style.display="flex",r.style.flexDirection="column",r.style.alignItems="center",t.style.position="relative",t.appendChild(r),e.forEach(o=>{let n=q(o.type,o.type);r.appendChild(n)})}var b={BASE:"#4CAF50",RELEASE:"#FF5722",PROG:"#2196F3",DEFAULT:"#9E9E9E"};function q(t,e){let r=b[e]||b.DEFAULT,o=document.createElement("div");return o.textContent=t,o.className="tag-container-badge",o.style.backgroundColor=r,o.style.color="white",o.style.borderRadius="12px",o.style.padding="4px 8px",o.style.marginBottom="4px",o.style.fontSize="12px",o.style.fontWeight="bold",o.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.2)",o.style.pointerEvents="none",o}function p(){let t=L();T(t)}function x(){[".card-pool-folder",".player-board-hand"].forEach(e=>{let r=document.querySelector(e);if(r){let o=new MutationObserver(a=>{a.filter(c=>{let l=c.target.classList.contains("card-overlay"),u=c.target.classList.contains("tag-container"),d=c.target.classList.contains("tag-container-badge");return!(l||u||d)}).length>0&&n()}),n=P(()=>{o.disconnect(),p(),setTimeout(()=>{o.observe(r,{childList:!0,subtree:!0})},400)},100);o.observe(r,{childList:!0,subtree:!0})}})}function w(t){if(t.querySelector(".card-overlay"))return;t.style.position="relative";let e=document.createElement("div");e.className="card-overlay",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.right="0",e.style.bottom="0",e.style.border="3px solid yellow",e.style.pointerEvents="none",e.style.borderRadius="inherit",e.style.boxSizing="border-box",t.appendChild(e)}function C(t){let e=t.querySelector(".card-overlay");if(e)e.remove();else return}function P(t,e=300){let r;return function(...o){clearTimeout(r),r=setTimeout(()=>t.apply(this,o),e)}}function B(t){let e=t.querySelector(".unmark-button");e||(e=document.createElement("button"),e.textContent="\xD7",e.className="unmark-button",e.style.position="absolute",e.style.top="30%",e.style.right="10px",e.style.transform="translateY(-50%)",e.style.backgroundColor="Orange",e.style.color="white",e.style.border="none",e.style.borderRadius="50%",e.style.width="20px",e.style.height="20px",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.fontSize="16px",e.style.cursor="pointer",e.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.2)",e.style.zIndex="1000",e.addEventListener("click",r=>{r.stopPropagation(),I(t)}),t.appendChild(e))}function I(t){let e=t.querySelector(".tag-container");e&&e.remove(),C(t),R(t),t.setAttribute("data-unmarked","true")}function R(t){let e=t.querySelector(".unmark-button");if(e)e.remove();else return}var i=class{constructor(){this.state={playerNames:{yourName:null,opponentName:null},trackedCards:[]},this.callbacks=[]}onStateChange(e){this.callbacks.push(e)}notifyStateChange(){this.callbacks.forEach(e=>e(this))}async loadState(){return new Promise(e=>{chrome.storage.local.get("trackerState",r=>{r.trackerState&&(this.state=r.trackerState),e(this.state),this.notifyStateChange()})})}saveState(){chrome.storage.local.set({trackerState:this.state},()=>{this.notifyStateChange()})}updatePlayerNames(e,r){this.state.playerNames={yourName:e,opponentName:r},this.saveState()}addCard(e){this.state.trackedCards.includes(e)||(this.state.trackedCards.push(e),this.saveState())}removeCard(e){let r=this.state.trackedCards.indexOf(e);r!==-1&&(this.state.trackedCards.splice(r,1),this.saveState())}clearCards(){this.state.trackedCards=[],this.saveState()}getState(){return this.state}};var v=new i;function k(t){t.loadState(),t.onStateChange(f),y(t),setTimeout(()=>{m("#logs",g,t);let{yourName:e,opponentName:r}=h();t.updatePlayerNames(e,r),p(),x()},1e3)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{k(v)}):k(v);})();
//# sourceMappingURL=bundledContent.js.map
